<div class="card p-4 bg-white m-4 rounded shadow-sm">
    
    <p-toolbar styleClass="mb-4">
        <ng-template pTemplate="left">
            <h2 class="text-2xl font-bold m-0 mr-4 text-slate-700">Categorías</h2>
            <button pButton label="Nueva Categoría" icon="pi pi-plus" class="p-button-success" (click)="openNew()"></button>
        </ng-template>
    </p-toolbar>

    <p-table [value]="categories" [loading]="loading" [rowHover]="true" responsiveLayout="scroll">
        <ng-template pTemplate="header">
            <tr>
                <th style="width: 100px">ID</th>
                <th>Nombre</th>
                <th style="width: 150px">Acciones</th>
            </tr>
        </ng-template>
        <ng-template pTemplate="body" let-cat>
            <tr>
                <td>{{cat.id}}</td>
                <td class="font-bold text-lg">{{cat.nombre}}</td>
                <td>
                    <button pButton icon="pi pi-pencil" class="p-button-rounded p-button-text p-button-warning mr-2" (click)="editCategory(cat)"></button>
                    <button pButton icon="pi pi-trash" class="p-button-rounded p-button-text p-button-danger" (click)="deleteCategory(cat)"></button>
                </td>
            </tr>
        </ng-template>
        
        <ng-template pTemplate="emptymessage">
            <tr>
                <td colspan="3" class="text-center p-4">No hay categorías registradas.</td>
            </tr>
        </ng-template>
    </p-table>
</div>

<p-dialog [(visible)]="categoryDialog" [style]="{width: '450px'}" header="Detalles Categoría" [modal]="true" styleClass="p-fluid">
    <ng-template pTemplate="content">
        <div class="field mt-2">
            <label for="name" class="font-bold block mb-2">Nombre</label>
            <input type="text" pInputText id="name" [(ngModel)]="category.nombre" required autofocus />
            <small class="p-error block mt-1" *ngIf="submitted && !category.nombre">El nombre es obligatorio.</small>
        </div>
    </ng-template>

    <ng-template pTemplate="footer">
        <button pButton label="Cancelar" icon="pi pi-times" class="p-button-text" (click)="categoryDialog=false"></button>
        <button pButton label="Guardar" icon="pi pi-check" class="p-button-text" (click)="saveCategory()"></button>
    </ng-template>
</p-dialog>

<p-confirmDialog [style]="{width: '450px'}"></p-confirmDialog>
<p-toast></p-toast>